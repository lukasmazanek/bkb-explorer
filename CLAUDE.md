# CLAUDE.md

> **BKB Explorer** - Interactive Business Knowledge Blueprint Explorer
> **Status:** IN_PROGRESS | P1 Demo for BA presentation
> **Tech:** HTML, CSS, JavaScript (Cytoscape.js)

---

## Purpose

Presentation layer for Semantic Platform. Visualizes ontology data from ontology-lift as an interactive Business Knowledge Blueprint explorer.

BKB = Business Knowledge Blueprint
CST = ConceptSpeak Text (textual representation of ConceptSpeak visual language)

## Project Role

This is a **frontend-only** project - no server-side code. It consumes data generated by ontology-lift and presents it as an interactive Business Knowledge Blueprint.

```
ontology-lift/export/  →  prepare-demo.sh  →  bkb-explorer/js/data.js  →  Browser
     (JSON)                  (bundle)              (inline JS)            (render)
```

## Data Source

Data comes from `../ontology-lift/export/`. Run `./prepare-demo.sh` to copy and bundle data into `js/data.js`.

## Development

No build step required. Open `index.html` directly in browser (works offline).

```bash
# Prepare data
./prepare-demo.sh

# Open demo
open index.html
```

## Project Structure

```
bkb-explorer/
├── CLAUDE.md           # This file
├── README.md           # User documentation
├── index.html          # Main page
├── css/
│   └── explorer.css    # Styles
├── js/
│   ├── vendor/         # External libraries (offline)
│   │   ├── cytoscape.min.js
│   │   ├── dagre.min.js
│   │   └── cytoscape-dagre.min.js
│   ├── data.js         # Inline data (generated)
│   ├── app.js          # Main application
│   ├── sidebar.js      # Domain tree navigation
│   ├── graph.js        # Cytoscape wrapper
│   ├── tooltip.js      # Hover cards
│   └── views.js        # View abstraction (ADR-040)
└── prepare-demo.sh     # Data preparation script
```

## Components

| Component | File | Description |
|-----------|------|-------------|
| **App** | app.js | Main application, state management |
| **Sidebar** | sidebar.js | Domain tree navigation with Views |
| **Graph** | graph.js | Cytoscape.js canvas with nodes/edges |
| **Tooltip** | tooltip.js | Hover cards with definition, FIBO, cross-domain |
| **Views** | views.js | View abstraction - filter by source file (ADR-040) |
| **Data** | data.js | Inline bundled ontology data |

## Visual Rules

| Element | Style |
|---------|-------|
| Node shape | rectangle |
| FIBO mapped | Green (#2ecc71) |
| DRAFT | Orange (#f39c12) |
| INHERITED | Blue (#3498db) |
| Ghost node | 50% opacity, dashed border |
| Edge extends | Solid, 4px, with arrow |
| Edge categorizes | Dashed, 2px |

## Rules

1. **Pure frontend** - no server-side code, no Node.js build
2. **Inline data** - all data bundled in js/data.js (no fetch)
3. **Works offline** - vendor libs bundled locally
4. **No external dependencies at runtime** - everything in the ZIP
5. **Keep it simple** - vanilla JS, no frameworks

## Testing

Manual testing in browser:

- [ ] Sidebar tree expands/collapses
- [ ] Domain click loads graph
- [ ] Hover shows tooltip
- [ ] Click expands/collapses node
- [ ] Ghost nodes visible for cross-domain
- [ ] Portal navigation works
- [ ] View navigation filters concepts (ADR-040)
- [ ] View dropdown syncs with sidebar selection

## Dependencies

| Library | Version | Purpose |
|---------|---------|---------|
| Cytoscape.js | 3.x | Graph visualization |
| Dagre | 0.8.x | Hierarchical layout |
| cytoscape-dagre | 2.x | Dagre integration |

## Related Documents

| Document | Location |
|----------|----------|
| Demo QAR decisions | semantic-platform/ (this session) |
| Ontology data | ontology-lift/export/ |
| Pipeline | ontology-lift/README.md |
